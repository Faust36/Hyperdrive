!function(s){var e={};function t(i){if(e[i])return e[i].exports;var h=e[i]={i:i,l:!1,exports:{}};return s[i].call(h.exports,h,h.exports,t),h.l=!0,h.exports}t.m=s,t.c=e,t.d=function(s,e,i){t.o(s,e)||Object.defineProperty(s,e,{configurable:!1,enumerable:!0,get:i})},t.r=function(s){Object.defineProperty(s,"__esModule",{value:!0})},t.n=function(s){var e=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(e,"a",e),e},t.o=function(s,e){return Object.prototype.hasOwnProperty.call(s,e)},t.p="",t(t.s=0)}([function(s,e,t){"use strict";t.r(e);var i=class{dist(s,e){return Math.sqrt(Math.pow(s[0]-e[0],2)+Math.pow(s[1]-e[1],2))}};var h=class{constructor(s){this.game=s.game,this.pos=s.pos,this.speed=10,this.bullet=s.imageRepo.bullet,this.context=s.context,this.enemyBullet=s.imageRepo.enemyBullet,this.radius=25,this.util=new i,this.bossBullet=s.imageRepo.star,this.bossBulletFrame1=0,this.bossBulletFrame2=0,this.bossBulletFrame3=0}draw(s){switch(this.context){case"blue":s.drawImage(this.bullet,this.pos[0],this.pos[1],60,60),this.pos[1]-=this.speed,this.pos[1]<-10&&this.game.remove(this);break;case"red":s.drawImage(this.enemyBullet,this.pos[0],this.pos[1],60,60),this.pos[1]+=this.speed,this.pos[1]>this.game.height&&this.game.remove(this);break;case"boss1":this.bossBulletFrame1<this.bossBullet.length?(s.drawImage(this.bossBullet[this.bossBulletFrame1],this.pos[0],this.pos[1],60,60),this.bossBulletFrame1+=1):(this.bossBulletFrame1=0,s.drawImage(this.bossBullet[this.bossBulletFrame1],this.pos[0],this.pos[1],60,60),this.bossBulletFrame1+=1),this.pos[1]+=this.speed/3,this.pos[1]>this.game.height&&this.game.remove(this);break;case"boss2":this.bossBulletFrame2<this.bossBullet.length?(s.drawImage(this.bossBullet[this.bossBulletFrame2],this.pos[0],this.pos[1],60,60),this.bossBulletFrame2+=1):(this.bossBulletFrame2=0,s.drawImage(this.bossBullet[this.bossBulletFrame2],this.pos[0],this.pos[1],60,60),this.bossBulletFrame2+=1),this.pos[1]+=this.speed/3,this.pos[0]+=this.speed/6,(this.pos[1]>this.game.height||this.pos[0]>this.game.width)&&this.game.remove(this);break;case"boss3":this.bossBulletFrame3<this.bossBullet.length?(s.drawImage(this.bossBullet[this.bossBulletFrame3],this.pos[0],this.pos[1],60,60),this.bossBulletFrame3+=1):(this.bossBulletFrame3=0,s.drawImage(this.bossBullet[this.bossBulletFrame3],this.pos[0],this.pos[1],60,60),this.bossBulletFrame3+=1),this.pos[1]+=this.speed/3,this.pos[0]-=this.speed/6,(this.pos[1]>this.game.height||this.pos[0]<0)&&this.game.remove(this);break;default:throw new Error("unknown type")}}isCollidedWith(s){return this.util.dist(this.pos,s.pos)<this.radius+s.radius}collision(){this.game.remove(this)}bossBulletImage(s){let e;return s<this.bossBullet.length?(e=this.bossBullet[s],s+=1):(s=0,e=this.bossBullet[s],s+=1),e}};var o=class{constructor(s){this.pos=[s.pos[0],s.pos[1]],this.shipModels=s.imageRepo.blueShip,this.explosion=s.imageRepo.blueExplosion,this.imageRepo=s.imageRepo,this.frame=0,this.frameWidth=s.width,this.frameHeight=s.height,this.game=s.game,this.radius=20,this.util=new i,this.killCount=0,this.bossKills=0,this.collided=!1,this.collisionFrame=0,this.laser=this.createSound("./assets/sounds/laser2.mp3")}draw(s){this.collided?this.collided&&this.collisionFrame<this.explosion.length?(s.drawImage(this.explosion[this.collisionFrame],this.pos[0],this.pos[1],140,140),this.collisionFrame+=1):this.game.remove(this):this.frame<8?(s.drawImage(this.shipModels[this.frame],this.pos[0],this.pos[1],70,70),this.frame+=1):(this.frame=0,s.drawImage(this.shipModels[this.frame],this.pos[0],this.pos[1],70,70),this.frame+=1)}move(s){const e=this.pos[0]+=s[0],t=this.pos[1]+=s[1];e<=0?this.pos[0]=0:e>=this.frameWidth-70?this.pos[0]=this.frameWidth-70:this.pos[0]=e,t<=0?this.pos[1]=0:t>=this.frameHeight-70?this.pos[1]=this.frameHeight-70:this.pos[1]=t}fire(){if(!this.collided){this.laser.play();const s=new h({game:this.game,pos:[this.pos[0]+9,this.pos[1]-30],context:"blue",imageRepo:this.imageRepo}),e=new h({game:this.game,pos:[this.pos[0]-2,this.pos[1]-30],context:"blue",imageRepo:this.imageRepo});this.game.playerBullets.push(s,e)}}isCollidedWith(s){return this.util.dist(this.pos,s.pos)<this.radius+s.radius}collision(){this.collided=!0}createSound(s){let e=document.createElement("audio");return e.src=s,e.setAttribute("preload","auto"),e.setAttribute("controls","none"),e.style.display="none",document.body.appendChild(e),e}};var a=class{constructor(s){this.pos=s.pos,this.speed=1,this.shipModels=s.imageRepo.redShip,this.explosion=s.imageRepo.redExplosion,this.frame=0,this.game=s.game,this.fire=this.fire.bind(this),this.radius=20,this.util=new i,this.imageRepo=s.imageRepo,this.collided=!1,this.collisionFrame=0,this.explosionSound=s.explosionSound,this.laser=s.laser}draw(s){this.collided?this.collided&&this.collisionFrame<this.explosion.length?(s.drawImage(this.explosion[this.collisionFrame],this.pos[0],this.pos[1],140,140),this.collisionFrame+=1):this.game.remove(this):(this.frame<8?(s.drawImage(this.shipModels[this.frame],this.pos[0],this.pos[1],70,70),this.frame+=1,this.pos[1]+=this.speed):(this.frame=0,s.drawImage(this.shipModels[this.frame],this.pos[0],this.pos[1],70,70),this.frame+=1,this.pos[1]+=this.speed),this.pos[1]>this.game.height&&this.game.remove(this))}fire(){if(!this.collided){this.laser.play();const s=new h({game:this.game,pos:[this.pos[0]+9,this.pos[1]-20],context:"red",imageRepo:this.imageRepo});this.game.enemyBullets.push(s)}}isCollidedWith(s){return this.util.dist(this.pos,s.pos)<this.radius+s.radius}collision(){this.collided=!0,this.explosionSound.play()}};class r{constructor(s){this.pos=s.pos,this.speed=[0,.4],this.asteroids=s.asteroids,this.util=new i,this.game=s.game,this.radius=15,this.index=Math.floor(4*Math.random()),this.degree=1,this.collided=!1,this.collisionFrame=0,this.explosion=s.explosion,this.rock=s.rock}draw(s){this.collided?this.collided&&this.collisionFrame<this.explosion.length?(s.drawImage(this.explosion[this.collisionFrame],this.pos[0]-60,this.pos[1]-60,200,200),this.collisionFrame+=1):this.game.remove(this):(s.save(),s.translate(this.pos[0],this.pos[1]),s.rotate(this.degree*Math.PI/180),s.drawImage(this.asteroids[this.index],-30,-30,60,60),s.restore(),this.degree<361?this.degree+=1:this.degree=1,this.pos[0]+=this.speed[0],this.pos[1]+=this.speed[1],this.isOutOfBounds(this.pos)&&this.game.remove(this))}isOutOfBounds(s){return s[0]<0||s[1]<0||s[0]>this.game.width||s[1]>this.game.height}isCollidedWith(s){return this.util.dist(this.pos,s.pos)<this.radius+s.radius}collision(s){this.rock.play(),this.collided=!0}}r.MOVEMENTS=[[[0,200],[1,1]],[[0,400],[1,-1]],[[800,200],[-1,1]],[[800,400],[-1,-1]]];var l=r;var p=class{constructor(s){this.imageRepo=s.imageRepo,this.bossModel=s.bossModel,this.game=s.game,this.radius=70,this.pos=s.pos,this.speed=.3,this.util=new i,this.health=100,this.destroyed=!1,this.explosion=s.imageRepo.bossExplosion,this.destructionFrame=0,this.boundary=0,this.fire=this.fire.bind(this),this.explosionSound=s.explosionSound,this.laser=s.laser}draw(s){this.destroyed?this.destroyed&&this.destructionFrame<this.explosion.length?(s.drawImage(this.explosion[this.destructionFrame],this.pos[0]-50,this.pos[1]-50,400,400),this.destructionFrame+=1):this.game.remove(this):(s.drawImage(this.bossModel,this.pos[0],this.pos[1],200,200),this.pos[1]<50&&(this.pos[1]+=this.speed))}fire(){if(!this.destroyed){this.laser.play();const s=new h({game:this.game,pos:[this.pos[0]+60,this.pos[1]+50],context:"boss1",imageRepo:this.imageRepo}),e=new h({game:this.game,pos:[this.pos[0]+60,this.pos[1]+50],context:"boss2",imageRepo:this.imageRepo}),t=new h({game:this.game,pos:[this.pos[0]+60,this.pos[1]+50],context:"boss3",imageRepo:this.imageRepo});this.game.enemyBullets.push(s,e,t)}}isCollidedWith(s){return this.util.dist(this.pos,s.pos)<this.radius+s.radius}collision(){this.health>0?this.health-=1:(this.destroyed=!0,this.explosionSound.play())}};var n=class{constructor(s){this.enemies=[],this.asteroids=[],this.playerBullets=[],this.enemyBullets=[],this.boss=[],this.width=s.width,this.height=s.height,this.imageRepo=s.imageRepo,this.playerShip=[new o({pos:[this.width/2,this.height/2+50],game:this,width:this.width,height:this.height,explosionSound:this.explosion,imageRepo:this.imageRepo})],this.song=this.createSound("./assets/sounds/Star Commander1.wav"),this.explosion=this.createSound("./assets/sounds/enemy_exp.mp3"),this.laser=this.createSound("./assets/sounds/laser2.mp3"),this.boss_exp=this.createSound("./assets/sounds/boss_exp.mp3"),this.boss_laser=this.createSound("./assets/sounds/boss_weapon.mp3"),this.rock=this.createSound("./assets/sounds/rock.mp3"),this.song.play(),this.song.loop=!0,this.addEnemy=this.addEnemy.bind(this),this.addAsteroid=this.addAsteroid.bind(this),this.addBoss=this.addBoss.bind(this),this.gameOver=!1,setInterval(this.addEnemy,2e3),setInterval(this.addAsteroid,4e3),setInterval(this.addBoss,3e3)}draw(s){s.clearRect(0,0,this.width,this.height),this.checkCollisions(),this.allObjects().forEach(e=>{e.draw(s)})}remove(s){switch(s.constructor){case h:"blue"===s.context?this.playerBullets.splice(this.playerBullets.indexOf(s),1):this.enemyBullets.splice(this.enemyBullets.indexOf(s),1);break;case a:let e=this.enemies[this.enemies.indexOf(s)];clearInterval(e.fire,1500),this.playerShip[0]&&(this.playerShip[0].killCount+=1),this.enemies.splice(this.enemies.indexOf(s),1);break;case o:this.gameOver=!0,this.playerShip.pop();break;case l:this.asteroids.splice(this.asteroids.indexOf(s),1);break;case p:this.playerShip[0]&&(this.playerShip[0].bossKills+=1);let t=this.boss[0];clearInterval(t.fire,1500),this.boss.pop();break;default:throw new Error("unknown")}}allObjects(){return[].concat(this.enemies,this.asteroids,this.playerBullets,this.enemyBullets,this.playerShip,this.boss)}allHazards(){return[].concat(this.enemies,this.asteroids,this.enemyBullets,this.boss)}allTargets(){return[].concat(this.enemies,this.asteroids,this.boss)}addEnemy(){if(0===this.boss.length){const s=new a({pos:this.randomTopPos(),imageRepo:this.imageRepo,explosionSound:this.explosion,laser:this.laser,game:this});setInterval(s.fire,1500),this.enemies.push(s)}}addAsteroid(){let s=new l({game:this,asteroids:this.imageRepo.asteroids,explosion:this.imageRepo.redExplosion,rock:this.rock,pos:this.randomTopPos()});this.asteroids.push(s)}addBoss(){if(this.playerShip[0]&&this.playerShip[0].killCount>=3&&0===this.boss.length&&this.playerShip[0].bossKills<1){let s=new p({game:this,imageRepo:this.imageRepo,bossModel:this.imageRepo.bossModel1,explosionSound:this.boss_exp,laser:this.boss_laser,pos:[this.width/3,-110]});setInterval(s.fire,1500),this.boss.push(s)}}randomTopPos(){return[Math.floor(Math.random()*(this.width-70)),0]}checkCollisions(){this.playerBullets.forEach(s=>{this.allTargets().forEach(e=>{s.isCollidedWith(e)&&(s.collision(),e.collision())})}),this.allHazards().forEach(s=>{this.playerShip[0]&&s.isCollidedWith(this.playerShip[0])&&(this.playerShip[0].collision(),s.collision())})}createSound(s){let e=document.createElement("audio");return e.src=s,e.setAttribute("preload","auto"),e.setAttribute("controls","none"),e.style.display="none",document.body.appendChild(e),e}};var d=class{constructor(s,e,t){this.ctx=s,this.game=e,this.ship=e.playerShip[0],this.background=t}updateShip(){return key.isPressed("w")&&this.ship.move([0,-5]),key.isPressed("s")&&this.ship.move([0,5]),key.isPressed("d")&&this.ship.move([5,0]),key.isPressed("a")&&this.ship.move([-5,0]),!1}start(){document.getElementById("gameOver").classList.add("invisible"),this.lastTime=0,key("space",()=>{this.ship.fire()}),requestAnimationFrame(this.animate.bind(this))}animate(s){this.lastTime,this.background.draw(this.background.ctx),this.updateShip(),this.game.draw(this.ctx),this.lastTime=s,!1===this.game.gameOver?requestAnimationFrame(this.animate.bind(this)):(document.getElementById("gameOver").classList.remove("invisible"),this.muteAll())}muteAll(){document.querySelectorAll("audio").forEach(s=>{mute(s)})}};var m=class{constructor(){this.background=new Image,this.background.src="./assets/images/star2.jpg",this.redShip=this.enemyAnimation(),this.blueShip=this.playerAnimation(),this.blueExplosion=this.blueEffect(),this.redExplosion=this.redEffect(),this.asteroids=this.asteroids(),this.bullet=new Image,this.bullet.src="./assets/sprites/Spaceship_art_pack/Blue/bullet.png",this.enemyBullet=new Image,this.enemyBullet.src="./assets/sprites/Spaceship_art_pack/Red/bullet_red.png",this.bossModel1=new Image,this.bossModel1.src="./assets/sprites/Spaceship_art_pack/Red/mothership_try.png",this.bossModel2=this.bossModel2(),this.star=this.protonStar(),this.bossExplosion=this.bossExplosion()}enemyAnimation(){let s=[];for(var e=1;e<9;e++){var t=new Image;t.src=`./assets/sprites/Spaceship_art_pack/Red/Enemy_animation/${e}.png`,s.push(t)}return s}playerAnimation(){let s=[];for(var e=1;e<9;e++){var t=new Image;t.src=`./assets/sprites/Spaceship_art_pack/Blue/Animation/${e}.png`,s.push(t)}return s}blueEffect(){let s=[];for(var e=0;e<17;e++){var t=new Image;t.src=`./assets/sprites/Spaceship_art_pack/Effects/Blue Effects/1_${e}.png`,s.push(t)}return s}redEffect(){let s=[];for(var e=0;e<17;e++){var t=new Image;t.src=`./assets/sprites/Spaceship_art_pack/Effects/Red Explosion/1_${e}.png`,s.push(t)}return s}asteroids(){let s=[];for(var e=1;e<5;e++){var t=new Image;t.src=`./assets/sprites/Spaceship_art_pack/Asteroids/asteroid${e}.png`,s.push(t)}return s}bossModel2(){let s=[];for(var e=1;e<4;e++){var t=new Image;t.src=`./assets/sprites/Spaceship_art_pack/Red/comm_redship/${e}.png`,s.push(t)}return s}protonStar(){let s=[];for(var e=0;e<17;e++){var t=new Image;t.src=`./assets/sprites/Spaceship_art_pack/Effects/Proton Star/p_Sprite_${e}.png`,s.push(t)}return s}bossExplosion(){let s=[];for(var e=0;e<17;e++){var t=new Image;t.src=`./assets/sprites/Spaceship_art_pack/Effects/Galaxy/galaxy_${e}.png`,s.push(t)}return s}};var u=class{constructor(s){this.x=s.x,this.y=s.y,this.speed=.1,this.width=s.width,this.height=s.height,this.backgroundImage=s.backgroundImage,this.ctx=s.ctx}draw(s){this.y+=this.speed,s.drawImage(this.backgroundImage,this.x,this.y),s.drawImage(this.backgroundImage,this.x,this.y-this.height),this.y>=this.height&&(this.y=0)}};document.addEventListener("DOMContentLoaded",()=>{const s=new m,e=document.getElementById("background"),t=e.getContext("2d"),i=document.getElementById("canvas"),h=i.getContext("2d"),o=new u({x:0,y:0,width:e.width,height:e.height,backgroundImage:s.background,ctx:t});document.getElementById("play").addEventListener("click",()=>{const e=new n({width:i.width,height:i.height,imageRepo:s});new d(h,e,o).start()})})}]);